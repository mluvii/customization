<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
	    
	 .smallerText{
		margin-left: auto;
		margin-right:auto;
		width: 340px;
		text-align: center;
		margin-top: 2rem;
		font-size: 0.9rem;
	 }   
	 
	 body{
		width: 100%;
		padding: 0;
		height: 100%;
		margin: 1rem 0;
	 }
	    
	 .btnDiv{
		width: 142px;
		background-color: #a50034;
		color: #fff;
		border-radius: 3px; 
		text-align: center;
		padding: 0.5rem;
		cursor: pointer;
		display: inline-block;
	 }
	 
	 #mailInput{
		width: 315px;
		margin-left: auto;
		margin-right:auto; 
		background-color: #f5f5f5;
		border-radius: 3px;
		border-color: #b1b1b1;
		border-width: 1px;
		border-style: solid;
	 }
	 
	 #mailInput:focus{
	 outline: none;
	 }
	 
	 .centeredDiv{
		width: 320px;
		margin-left: auto;
		margin-right: auto;
		margin-top: 1rem;
		text-align: left;
	 }
	 
	 .textCenter{
	 text-align: center !important;
	 font-size: 1.1rem;
	 }
	 
	 .rating{
		margin-left: auto;
		margin-right:auto;
		width: 320px;
		margin-top: 1rem;
		height: 50px; 
		margin-bottom: 1rem; 
	 }
	 
	 .textDiv{
		text-align: center;
		margin-top: 2rem;
		width: 315px;
		margin-left: auto;
		margin-right:auto;
		background-color: #f5f5f5;
		border-radius: 3px;
		border-color: #b1b1b1;
		border-width: 1px;
		border-style: solid;
	 }
	 
	 #writtenRating{
		width:100%;
		line-height: 1.2rem;
		border-style: none;
		background-color: #f5f5f5;
		max-width: 270px;
		padding-right: 30px;
		resize: none;
	 }
	 
	  #writtenRating:focus{
	 outline: none;
	 }
	 
	 
	 #thumbUp{
	  background: url('./img/thumbUp.png') no-repeat;
	  background-size: 30px 30px;
	  width: 30px;
	  height: 30px;
	  margin-left: auto;
      margin-right: auto;
	 }
	 
	 #thumbDown{
	 background: url('./img/thumbDown.png') no-repeat;
	 background-size: 30px 30px;
	 width: 30px;
	 height: 30px;
	 margin-left: auto;
     margin-right: auto;
	 }
	 
	 #sendIcon{
		width: 8%;
		background-color: #f00;
		height: 1.2rem;
		float:right;
		background: url('./img/sipka.png') no-repeat;
		cursor: pointer;
		position: relative;
		top: -4.5rem;
		right: 5px;
	 }	    
    </style>
  </head>
  <body>
	<div class="smallerText">
	Jak jste byli spokojeni s komunikací s LG ASISTENTEM?<br/>
	Co bychom mohli v komunikaci vylepšit?
	</div>
	<div class="rating">
	<div class="btnDiv left" ><div id="thumbUp"></div></div>
	<div class="btnDiv right"><div id="thumbDown" ></div></div>
	</div>
	<div class="textDiv">
	<textarea id="writtenRating" rows="3"></textarea>
	<div id="sendIcon"></div>
	</div>
  <div class="centeredDiv"><input type="checkbox" id="mailTranscript" name="transcript" / ><label  class="smallerText" for="mailTranscript">Odeslat přepis chatu na e-mail</label></div>
  <div class="centeredDiv "><input type="text" id="mailInput" /></div>
	<div class="centeredDiv textCenter">
	Děkujeme za vaše hodnocení.
	</div>
	  
	 <script type="text/javascript">
	 (function()
	 {		
		let stars = null;
		
		const sendIcon = document.getElementById("sendIcon");
		const thumbUp = document.getElementById("thumbUp");
		const thumbDown = document.getElementById("thumbDown");
		
		sendIcon.addEventListener("click", function() {
			const mailTranscript = document.getElementById("mailTranscript");
			const mailInput = document.getElementById("mailInput");
			const writtenRating = document.getElementById("writtenRating");
			let mail = null;
			let writtenRatingText = null;
			
			if(mailTranscript.checked && mailInput ){
				mail = mailTranscript.value;
			}
			
			if(writtenRating.value != "" ){
				writtenRatingText = mailTranscript.value;
			}
			
			if(writtenRatingText == null && stars == null){
			return;
			}
		
			 window.parent.postMessage({
				type: "FEEDBACK_ACTION",
				email: mail,
				stars: stars,
				content: writtenRatingText
				}, "*");
		});
		
		thumbUp.addEventListener("click", function() {
			stars = 5;
		});
		
		thumbDown.addEventListener("click", function() {
			stars = 1;
		});
	 }
	 )();
      
      
    </script>
  </body>
</html>
